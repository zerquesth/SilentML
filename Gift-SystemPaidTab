local inventoryFolder = Shop:AddFolder("Inventory Management")

local proteinEggLabel = inventoryFolder:AddLabel("Protein Eggs: 0")
local tropicalShakeLabel = inventoryFolder:AddLabel("Tropical Shakes: 0")

local function updateItemCount()
    local proteinEggCount = 0
    local tropicalShakeCount = 0

    local player = game.Players.LocalPlayer
    local consumablesFolder = player:FindFirstChild("consumablesFolder")
    if consumablesFolder then
        for _, item in ipairs(consumablesFolder:GetChildren()) do
            if item.Name == "Protein Egg" then
                proteinEggCount = proteinEggCount + item.Value
            elseif item.Name == "Tropical Shake" then
                tropicalShakeCount = tropicalShakeCount + item.Value
            end
        end
    end

    proteinEggLabel.Text = "Protein Eggs: " .. proteinEggCount
    tropicalShakeLabel.Text = "Tropical Shakes: " .. tropicalShakeCount
end

task.spawn(function()
    while true do
        updateItemCount()
        task.wait(0.25)
    end
end)

local giftFolder = inventoryFolder:AddFolder("Gift System")
local selectedGiftPlayer = nil
local eggGiftCount = 0
local shakeGiftCount = 0

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local giftPlayerDropdown = giftFolder:AddDropdown("Choose Player", function(name)
    selectedGiftPlayer = Players:FindFirstChild(name)
end)

-- Заполняем список игроков
for _, targetPlayer in ipairs(Players:GetPlayers()) do
    if targetPlayer ~= player then
        giftPlayerDropdown:Add(targetPlayer.Name)
    end
end

-- Обновляем список при подключении новых игроков
Players.PlayerAdded:Connect(function(newPlayer)
    if newPlayer ~= player then
        giftPlayerDropdown:Add(newPlayer.Name)
    end
end)

-- Обновляем список при отключении игроков
Players.PlayerRemoving:Connect(function(leavingPlayer)
    giftPlayerDropdown:Remove(leavingPlayer.Name)
end)

giftFolder:AddTextBox("Egg Amount", function(text)
    eggGiftCount = tonumber(text) or 0
end)

giftFolder:AddButton("Gift Eggs", function()
    if selectedGiftPlayer and eggGiftCount and eggGiftCount > 0 then
        local proteinEgg = player.consumablesFolder:FindFirstChild("Protein Egg")
        if proteinEgg then
            for i = 1, eggGiftCount do
                ReplicatedStorage.rEvents.giftRemote:InvokeServer("giftRequest", selectedGiftPlayer, proteinEgg)
                task.wait(0.1) -- Небольшая задержка между гифтами
            end
        end
    end
end)

giftFolder:AddTextBox("Shake Amount", function(text)
    shakeGiftCount = tonumber(text) or 0
end)

giftFolder:AddButton("Gift Shakes", function()
    if selectedGiftPlayer and shakeGiftCount and shakeGiftCount > 0 then
        local tropicalShake = player.consumablesFolder:FindFirstChild("Tropical Shake")
        if tropicalShake then
            for i = 1, shakeGiftCount do
                ReplicatedStorage.rEvents.giftRemote:InvokeServer("giftRequest", selectedGiftPlayer, tropicalShake)
                task.wait(0.1) -- Небольшая задержка между гифтами
            end
        end
    end
end)
